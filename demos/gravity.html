<!DOCTYPE html>
<html lang="en">
	<head>
		<title>AFrame Demo</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="./third-party/aframe.min.js"></script>
		<script src="./third-party/aframe-environment-component.js"></script>
		<script src="./third-party/aframe-physics-system.min.js"></script>
		<script src="./helpers/avatar-helper-components.js"></script>
		<script src="./fast-sync/fast-sync-component.js"></script>
	</head>
	<body>
	<a-scene physics="debug: true;">
		<a-entity environment="shadow: true; shadowSize: 10; preset: threetowers;" ></a-entity> 
		<a-entity circle-around="radius: 6; origin: 0 0 0;">
			<a-camera rotation="0 180 0"></a-camera>
		</a-entity>

		<a-entity id="floor" position="0 -0.2 0" geometry="primitive: plane; width: 20; height: 20;" visible="false" rotation="-90 0 0" position="0 -0.2 0" static-body></a-entity>
		<a-box fast-sync="transferables: dynamic-body,foo;" foo="bar" shadow="receive: false;" material="color: blue;" position="0 2 0" dynamic-body="mass:1;"></a-box>

		<script>
				
			// steal rotating cube back after it has been stolen once
			setTimeout(function() {
				var el = document.querySelector('[fast-sync-listener]');
				el.components['fast-sync-listener'].steal({
					transfer: ['dynamic-body', 'foo']
				});
			}, 8000);

			// steal rotating cube here the gravity is reversed
			setTimeout(function() {
				var el = document.querySelector('[fast-sync-listener]');
				el.components['fast-sync-listener'].steal({
					transfer: ['dynamic-body', 'foo']
				});
			}, 13000);
		</script>	
	</a-scene>
	</body>
</html>